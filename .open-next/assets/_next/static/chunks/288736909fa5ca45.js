(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,330159,e=>{"use strict";let t,n;var r=e.i(843476),s=e.i(271645),o=e.i(522016),i=e.i(618566),a=e.i(589511),a=a,l=e.i(781866),l=l,u=e.i(87316),c=e.i(636284),c=c,d=e.i(561659),f=e.i(212426),p=e.i(178583),h=e.i(403014),h=h,g=e.i(680818),g=g,m=e.i(488844),b=e.i(836497),b=b,y=e.i(903446),y=y,v=e.i(26277),v=v,w=e.i(761911),x=e.i(645196);let T={[x.ROLES.ADMIN]:[{label:"Dashboard",href:"/dashboard",icon:h.default},{label:"Patients",href:"/patients",icon:w.Users},{label:"Appointments",href:"/appointments",icon:u.Calendar},{label:"Medical Records",href:"/medical-records",icon:c.default},{label:"Ortho Consent",href:"/ortho-consent",icon:p.FileText},{label:"Inventory",href:"/inventory",icon:m.Package},{label:"Products",href:"/products",icon:v.default},{label:"Payments",href:"/payments",icon:d.CreditCard},{label:"Expenses",href:"/expenses",icon:f.DollarSign},{label:"Messaging",href:"/messaging",icon:g.default},{label:"Users",href:"/users",icon:w.Users},{label:"Reports",href:"/reports",icon:l.default},{label:"Audit Logs",href:"/audit-logs",icon:b.default},{label:"Settings",href:"/settings",icon:y.default}],[x.ROLES.DOCTOR]:[{label:"Dashboard",href:"/dashboard",icon:h.default},{label:"Patients",href:"/patients",icon:w.Users},{label:"Appointments",href:"/appointments",icon:u.Calendar},{label:"Medical Records",href:"/medical-records",icon:c.default},{label:"Ortho Consent",href:"/ortho-consent",icon:p.FileText}],[x.ROLES.RECEPTIONIST]:[{label:"Dashboard",href:"/dashboard",icon:h.default},{label:"Patients",href:"/patients",icon:w.Users},{label:"Appointments",href:"/appointments",icon:u.Calendar},{label:"Ortho Consent",href:"/ortho-consent",icon:p.FileText},{label:"Products",href:"/products",icon:v.default},{label:"Inventory",href:"/inventory",icon:m.Package},{label:"Expenses",href:"/expenses",icon:f.DollarSign},{label:"Payments",href:"/payments",icon:d.CreditCard},{label:"Messaging",href:"/messaging",icon:g.default},{label:"Reports",href:"/reports",icon:l.default}]};function R(e){return e&&T[e]||T[x.ROLES.RECEPTIONIST]}function E({isCollapsed:e,user:t}){let n=(0,i.usePathname)(),s=R(t?.roleId);return(0,r.jsx)("div",{className:"hidden border-r bg-gray-100/40 lg:block dark:bg-gray-800/40 min-h-screen",children:(0,r.jsxs)("div",{className:"flex h-full max-h-screen flex-col gap-2",children:[(0,r.jsx)("div",{className:`flex h-[60px] items-center border-b ${e?"justify-center px-2":"px-6"}`,children:(0,r.jsxs)(o.default,{className:"flex items-center gap-2 font-semibold",href:"#",children:[(0,r.jsx)(a.default,{className:"h-6 w-6"}),(0,r.jsx)("span",{className:e?"hidden":"",children:"Clinic"})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-auto py-2",children:(0,r.jsx)("nav",{className:"grid items-start px-2 text-sm font-medium",children:s.map((t,s)=>(0,r.jsxs)(o.default,{className:`flex items-center gap-3 rounded-lg px-3 py-2 text-gray-500 transition-all hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-50 ${n===t.href?"bg-gray-200 text-gray-900 dark:bg-gray-700 dark:text-gray-50 shadow-sm":""} ${e?"justify-center":""}`,href:t.href,children:[(0,r.jsx)(t.icon,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:e?"hidden":"",children:t.label})]},s))})})]})})}var O=e.i(956477),O=O,S=e.i(555436),a=a,j=e.i(167881),N=e.i(463415),L=e.i(23750),_=e.i(326999),A=e.i(225913),C=e.i(37727),U=e.i(647163);let I=_.Root,P=_.Trigger;_.Close;let k=_.Portal,D=s.forwardRef(({className:e,...t},n)=>(0,r.jsx)(_.Overlay,{className:(0,U.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));D.displayName=_.Overlay.displayName;let M=(0,A.cva)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),$=s.forwardRef(({side:e="right",className:t,children:n,...s},o)=>(0,r.jsxs)(k,{children:[(0,r.jsx)(D,{}),(0,r.jsxs)(_.Content,{ref:o,className:(0,U.cn)(M({side:e}),t),...s,children:[n,(0,r.jsxs)(_.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,r.jsx)(C.X,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));$.displayName=_.Content.displayName;let B=({className:e,...t})=>(0,r.jsx)("div",{className:(0,U.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...t});B.displayName="SheetHeader";let q=s.forwardRef(({className:e,...t},n)=>(0,r.jsx)(_.Title,{ref:n,className:(0,U.cn)("text-lg font-semibold text-foreground",e),...t}));q.displayName=_.Title.displayName,s.forwardRef(({className:e,...t},n)=>(0,r.jsx)(_.Description,{ref:n,className:(0,U.cn)("text-sm text-muted-foreground",e),...t})).displayName=_.Description.displayName;var F=e.i(63270),H=e.i(247167);let W=Object.create(null),G=e=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?W:globalThis),V=new Proxy(W,{get:(e,t)=>G()[t]??W[t],has:(e,t)=>t in G()||t in W,set:(e,t,n)=>(G(!0)[t]=n,!0),deleteProperty(e,t){if(!t)return!1;let n=G(!0);return delete n[t],!0},ownKeys:()=>Object.keys(G(!0))});function J(e,t){return void 0!==H.default&&H.default.env?H.default.env[e]??t:"undefined"!=typeof Deno?Deno.env.get(e)??t:"undefined"!=typeof Bun?Bun.env[e]??t:t}void 0!==H.default&&H.default.env,Object.freeze({get BETTER_AUTH_SECRET(){return J("BETTER_AUTH_SECRET")},get AUTH_SECRET(){return J("AUTH_SECRET")},get BETTER_AUTH_TELEMETRY(){return J("BETTER_AUTH_TELEMETRY")},get BETTER_AUTH_TELEMETRY_ID(){return J("BETTER_AUTH_TELEMETRY_ID")},get NODE_ENV(){return J("NODE_ENV","development")},get PACKAGE_VERSION(){return J("PACKAGE_VERSION","0.0.0")},get BETTER_AUTH_TELEMETRY_ENDPOINT(){return J("BETTER_AUTH_TELEMETRY_ENDPOINT","https://telemetry.better-auth.com/v1/track")}});let Y={eterm:4,cons25:4,console:4,cygwin:4,dtterm:4,gnome:4,hurd:4,jfbterm:4,konsole:4,kterm:4,mlterm:4,mosh:24,putty:4,st:4,"rxvt-unicode-24bit":24,terminator:24,"xterm-kitty":24},z=new Map(Object.entries({APPVEYOR:8,BUILDKITE:8,CIRCLECI:24,DRONE:8,GITEA_ACTIONS:24,GITHUB_ACTIONS:24,GITLAB_CI:8,TRAVIS:8})),K=[/ansi/,/color/,/linux/,/direct/,/^con[0-9]*x[0-9]/,/^rxvt/,/^screen/,/^xterm/,/^vt100/,/^vt220/],X="\x1b[0m",Z="\x1b[31m",Q="\x1b[32m",ee="\x1b[33m",et="\x1b[34m",en="\x1b[35m",er=["debug","info","success","warn","error"],es={info:et,success:Q,warn:ee,error:Z,debug:en};t=(void 0)??"error",n=1!==function(){if(void 0!==J("FORCE_COLOR"))switch(J("FORCE_COLOR")){case"":case"1":case"true":return 4;case"2":return 8;case"3":return 24;default:return 1}if(void 0!==J("NODE_DISABLE_COLORS")&&""!==J("NODE_DISABLE_COLORS")||void 0!==J("NO_COLOR")&&""!==J("NO_COLOR")||"dumb"===J("TERM"))return 1;if(J("TMUX"))return 24;if("TF_BUILD"in V&&"AGENT_NAME"in V)return 4;if("CI"in V){for(let{0:e,1:t}of z)if(e in V)return t;return"codeship"===J("CI_NAME")?8:1}if("TEAMCITY_VERSION"in V)return null!==/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.exec(J("TEAMCITY_VERSION"))?4:1;switch(J("TERM_PROGRAM")){case"iTerm.app":if(!J("TERM_PROGRAM_VERSION")||null!==/^[0-2]\./.exec(J("TERM_PROGRAM_VERSION")))return 8;return 24;case"HyperTerm":case"MacTerm":return 24;case"Apple_Terminal":return 8}if("truecolor"===J("COLORTERM")||"24bit"===J("COLORTERM"))return 24;if(J("TERM")){if(null!==/truecolor/.exec(J("TERM")))return 24;if(null!==/^xterm-256/.exec(J("TERM")))return 8;let e=J("TERM").toLowerCase();if(Y[e])return Y[e];if(K.some(t=>null!==t.exec(e)))return 4}return J("COLORTERM")?4:1}(),Object.fromEntries(er.map(e=>[e,(...[r,...s])=>((e,r,s=[])=>{let o;if(!(er.indexOf(e)>=er.indexOf(t)))return;let i=(o=new Date().toISOString(),n?`\x1b[2m${o}${X} ${es[e]}${e.toUpperCase()}${X} \x1b[1m[Better Auth]:${X} ${r}`:`${o} ${e.toUpperCase()} [Better Auth]: ${r}`);"error"===e?console.error(i,...s):"warn"===e?console.warn(i,...s):console.log(i,...s)})(e,r,s)]));var eo=class extends Error{constructor(e,t){super(e),this.name="BetterAuthError",this.message=e,this.cause=t,this.stack=""}};function ei(e,t="/api/auth"){try{let t=new URL(e);if("http:"!==t.protocol&&"https:"!==t.protocol)throw new eo(`Invalid base URL: ${e}. URL must include 'http://' or 'https://'`)}catch(t){if(t instanceof eo)throw t;throw new eo(`Invalid base URL: ${e}. Please provide a valid base URL.`,String(t))}if(function(e){try{return"/"!==(new URL(e).pathname.replace(/\/+$/,"")||"/")}catch{throw new eo(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}(e))return e;let n=e.replace(/\/+$/,"");return t&&"/"!==t?(t=t.startsWith("/")?t:`/${t}`,`${n}${t}`):n}let ea={id:"redirect",name:"Redirect",hooks:{onSuccess(e){if(e.data?.url&&e.data?.redirect&&"undefined"!=typeof window&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}},el={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},eu=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,ec={true:!0,false:!1,null:null,undefined:void 0,nan:NaN,infinity:1/0,"-infinity":-1/0},ed=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/,ef=[],ep=0,eh=0,eg=e=>{let t=[],n={get:()=>(n.lc||n.listen(()=>{})(),n.value),lc:0,listen:e=>(n.lc=t.push(e),()=>{for(let t=ep+4;t<ef.length;)ef[t]===e?ef.splice(t,4):t+=4;let r=t.indexOf(e);~r&&(t.splice(r,1),--n.lc||n.off())}),notify(e,r){eh++;let s=!ef.length;for(let s of t)ef.push(s,n.value,e,r);if(s){for(ep=0;ep<ef.length;ep+=4)ef[ep](ef[ep+1],ef[ep+2],ef[ep+3]);ef.length=0}},off(){},set(e){let t=n.value;t!==e&&(n.value=e,n.notify(t))},subscribe(e){let t=n.listen(e);return e(n.value),t},value:e};return n},em=(e,t)=>{var n,r;return n=n=>{let r=t(n);r&&e.events[6].push(r)},r=t=>{let n=e.listen;e.listen=(...r)=>(e.lc||e.active||(e.active=!0,t()),n(...r));let r=e.off;return e.events[6]=[],e.off=()=>{r(),setTimeout(()=>{if(e.active&&!e.lc){for(let t of(e.active=!1,e.events[6]))t();e.events[6]=[]}},1e3)},()=>{e.listen=n,e.off=r}},e.events=e.events||{},e.events[15]||(e.events[15]=r(t=>{e.events[5].reduceRight((e,t)=>(t(e),e),{shared:{},...t})})),e.events[5]=e.events[5]||[],e.events[5].push(n),()=>{let t=e.events[5],r=t.indexOf(n);t.splice(r,1),t.length||(delete e.events[5],e.events[15](),delete e.events[15])}},eb=()=>"undefined"==typeof window,ey=Symbol.for("better-auth:broadcast-channel");var ev=class{listeners=new Set;name;constructor(e="better-auth.message"){this.name=e}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}post(e){if("undefined"!=typeof window)try{localStorage.setItem(this.name,JSON.stringify({...e,timestamp:Math.floor(Date.now()/1e3)}))}catch{}}setup(){if("undefined"==typeof window||void 0===window.addEventListener)return()=>{};let e=e=>{if(e.key!==this.name)return;let t=JSON.parse(e.newValue??"{}");t?.event==="session"&&t?.data&&this.listeners.forEach(e=>e(t))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}};function ew(e="better-auth.message"){return globalThis[ey]||(globalThis[ey]=new ev(e)),globalThis[ey]}let ex=Symbol.for("better-auth:focus-manager");var eT=class{listeners=new Set;subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setFocused(e){this.listeners.forEach(t=>t(e))}setup(){if("undefined"==typeof window||"undefined"==typeof document||void 0===window.addEventListener)return()=>{};let e=()=>{"visible"===document.visibilityState&&this.setFocused(!0)};return document.addEventListener("visibilitychange",e,!1),()=>{document.removeEventListener("visibilitychange",e,!1)}}};function eR(){return globalThis[ex]||(globalThis[ex]=new eT),globalThis[ex]}let eE=Symbol.for("better-auth:online-manager");var eO=class{listeners=new Set;isOnline="undefined"==typeof navigator||navigator.onLine;subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setOnline(e){this.isOnline=e,this.listeners.forEach(t=>t(e))}setup(){if("undefined"==typeof window||void 0===window.addEventListener)return()=>{};let e=()=>this.setOnline(!0),t=()=>this.setOnline(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",t,!1),()=>{window.removeEventListener("online",e,!1),window.removeEventListener("offline",t,!1)}}};function eS(){return globalThis[eE]||(globalThis[eE]=new eO),globalThis[eE]}let ej=()=>Math.floor(Date.now()/1e3);var eN=Object.defineProperty,eL=Object.defineProperties,e_=Object.getOwnPropertyDescriptors,eA=Object.getOwnPropertySymbols,eC=Object.prototype.hasOwnProperty,eU=Object.prototype.propertyIsEnumerable,eI=(e,t,n)=>t in e?eN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,eP=(e,t)=>{for(var n in t||(t={}))eC.call(t,n)&&eI(e,n,t[n]);if(eA)for(var n of eA(t))eU.call(t,n)&&eI(e,n,t[n]);return e},ek=(e,t)=>eL(e,e_(t)),eD=class extends Error{constructor(e,t,n){super(t||e.toString(),{cause:n}),this.status=e,this.statusText=t,this.error=n,Error.captureStackTrace(this,this.constructor)}},eM=async(e,t)=>{var n,r,s,o,i,a;let l=t||{},u={onRequest:[null==t?void 0:t.onRequest],onResponse:[null==t?void 0:t.onResponse],onSuccess:[null==t?void 0:t.onSuccess],onError:[null==t?void 0:t.onError],onRetry:[null==t?void 0:t.onRetry]};if(!t||!(null==t?void 0:t.plugins))return{url:e,options:l,hooks:u};for(let c of(null==t?void 0:t.plugins)||[]){if(c.init){let r=await (null==(n=c.init)?void 0:n.call(c,e.toString(),t));l=r.options||l,e=r.url}u.onRequest.push(null==(r=c.hooks)?void 0:r.onRequest),u.onResponse.push(null==(s=c.hooks)?void 0:s.onResponse),u.onSuccess.push(null==(o=c.hooks)?void 0:o.onSuccess),u.onError.push(null==(i=c.hooks)?void 0:i.onError),u.onRetry.push(null==(a=c.hooks)?void 0:a.onRetry)}return{url:e,options:l,hooks:u}},e$=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},eB=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}},eq=async e=>{let t={},n=async e=>"function"==typeof e?await e():e;if(null==e?void 0:e.auth){if("Bearer"===e.auth.type){let r=await n(e.auth.token);if(!r)return t;t.authorization=`Bearer ${r}`}else if("Basic"===e.auth.type){let[r,s]=await Promise.all([n(e.auth.username),n(e.auth.password)]);if(!r||!s)return t;t.authorization=`Basic ${btoa(`${r}:${s}`)}`}else if("Custom"===e.auth.type){let[r,s]=await Promise.all([n(e.auth.prefix),n(e.auth.value)]);if(!s)return t;t.authorization=`${null!=r?r:""} ${s}`}}return t},eF=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function eH(e){if(void 0===e)return!1;let t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function eW(e){try{return JSON.parse(e)}catch(t){return e}}function eG(e){return"function"==typeof e}async function eV(e){let t=new Headers(null==e?void 0:e.headers);for(let[n,r]of Object.entries(await eq(e)||{}))t.set(n,r);if(!t.has("content-type")){let n=eH(null==e?void 0:e.body)?"application/json":null;n&&t.set("content-type",n)}return t}var eJ=class e extends Error{constructor(t,n){super(n||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,e.prototype)}};async function eY(e,t){let n=await e["~standard"].validate(t);if(n.issues)throw new eJ(n.issues);return n.value}var ez=["get","post","put","patch","delete"],eK=async(e,t)=>{var n,r,s,o,i,a,l,u;let c,{hooks:d,url:f,options:p}=await eM(e,t),h=function(e){if(null==e?void 0:e.customFetchImpl)return e.customFetchImpl;if("undefined"!=typeof globalThis&&eG(globalThis.fetch))return globalThis.fetch;if("undefined"!=typeof window&&eG(window.fetch))return window.fetch;throw Error("No fetch implementation found")}(p),g=new AbortController,m=null!=(n=p.signal)?n:g.signal,b=function(e,t){let{baseURL:n,params:r,query:s}=t||{query:{},params:{},baseURL:""},o=e.startsWith("http")?e.split("/").slice(0,3).join("/"):n||"";if(e.startsWith("@")){let t=e.toString().split("@")[1].split("/")[0];ez.includes(t)&&(e=e.replace(`@${t}/`,"/"))}o.endsWith("/")||(o+="/");let[i,a]=e.replace(o,"").split("?"),l=new URLSearchParams(a);for(let[e,t]of Object.entries(s||{})){let n;if(null!=t){if("string"==typeof t)n=t;else if(Array.isArray(t)){for(let n of t)l.append(e,n);continue}else n=JSON.stringify(t);l.set(e,n)}}if(r)if(Array.isArray(r))for(let[e,t]of i.split("/").filter(e=>e.startsWith(":")).entries()){let n=r[e];i=i.replace(t,n)}else for(let[e,t]of Object.entries(r))i=i.replace(`:${e}`,String(t));(i=i.split("/").map(encodeURIComponent).join("/")).startsWith("/")&&(i=i.slice(1));let u=l.toString();return(u=u.length>0?`?${u}`.replace(/\+/g,"%20"):"",o.startsWith("http"))?new URL(`${i}${u}`,o):`${o}${i}${u}`}(f,p),y=function(e){if(!(null==e?void 0:e.body))return null;let t=new Headers(null==e?void 0:e.headers);if(eH(e.body)&&!t.has("content-type")){for(let[t,n]of Object.entries(null==e?void 0:e.body))n instanceof Date&&(e.body[t]=n.toISOString());return JSON.stringify(e.body)}return t.has("content-type")&&"application/x-www-form-urlencoded"===t.get("content-type")&&eH(e.body)?new URLSearchParams(e.body).toString():e.body}(p),v=await eV(p),w=function(e,t){var n;if(null==t?void 0:t.method)return t.method.toUpperCase();if(e.startsWith("@")){let r=null==(n=e.split("@")[1])?void 0:n.split("/")[0];return ez.includes(r)?r.toUpperCase():(null==t?void 0:t.body)?"POST":"GET"}return(null==t?void 0:t.body)?"POST":"GET"}(f,p),x=ek(eP({},p),{url:b,headers:v,body:y,method:w,signal:m});for(let e of d.onRequest)if(e){let t=await e(x);"object"==typeof t&&null!==t&&(x=t)}("pipeTo"in x&&"function"==typeof x.pipeTo||"function"==typeof(null==(r=null==t?void 0:t.body)?void 0:r.pipe))&&!("duplex"in x)&&(x.duplex="half");let{clearTimeout:T}=(!(null==p?void 0:p.signal)&&(null==p?void 0:p.timeout)&&(c=setTimeout(()=>null==g?void 0:g.abort(),null==p?void 0:p.timeout)),{abortTimeout:c,clearTimeout:()=>{c&&clearTimeout(c)}}),R=await h(x.url,x);T();let E={response:R,request:x};for(let e of d.onResponse)if(e){let n=await e(ek(eP({},E),{response:(null==(s=null==t?void 0:t.hookOptions)?void 0:s.cloneResponse)?R.clone():R}));n instanceof Response?R=n:"object"==typeof n&&null!==n&&(R=n.response)}if(R.ok){if("HEAD"===x.method)return{data:"",error:null};let e=function(e){let t=e.headers.get("content-type"),n=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";let r=t.split(";").shift()||"";return eF.test(r)?"json":n.has(r)||r.startsWith("text/")?"text":"blob"}(R),n={data:null,response:R,request:x};if("json"===e||"text"===e){let e=await R.text(),t=null!=(o=x.jsonParser)?o:eW;n.data=await t(e)}else n.data=await R[e]();for(let e of((null==x?void 0:x.output)&&x.output&&!x.disableValidation&&(n.data=await eY(x.output,n.data)),d.onSuccess))e&&await e(ek(eP({},n),{response:(null==(i=null==t?void 0:t.hookOptions)?void 0:i.cloneResponse)?R.clone():R}));return(null==t?void 0:t.throw)?n.data:{data:n.data,error:null}}let O=null!=(a=null==t?void 0:t.jsonParser)?a:eW,S=await R.text(),j=function(e){try{return JSON.parse(e),!0}catch(e){return!1}}(S),N=j?await O(S):null,L={response:R,responseText:S,request:x,error:ek(eP({},N),{status:R.status,statusText:R.statusText})};for(let e of d.onError)e&&await e(ek(eP({},L),{response:(null==(l=null==t?void 0:t.hookOptions)?void 0:l.cloneResponse)?R.clone():R}));if(null==t?void 0:t.retry){let n=function(e){if("number"==typeof e)return new e$({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new e$(e);case"exponential":return new eB(e);default:throw Error("Invalid retry strategy")}}(t.retry),r=null!=(u=t.retryAttempt)?u:0;if(await n.shouldAttemptRetry(r,R)){for(let e of d.onRetry)e&&await e(E);let s=n.getDelay(r);return await new Promise(e=>setTimeout(e,s)),await eK(e,ek(eP({},t),{retryAttempt:r+1}))}}if(null==t?void 0:t.throw)throw new eD(R.status,R.statusText,j?N:S);return{data:null,error:ek(eP({},N),{status:R.status,statusText:R.statusText})}};let eX=function(e){var t;let{pluginPathMethods:n,pluginsActions:r,pluginsAtoms:o,$fetch:i,$store:a,atomListeners:l}=((e,t)=>{var n;let r,s,o="credentials"in Request.prototype,i=function(e,t,n,r,s){if(e)return ei(e,t);if(!1!==r){let e=V.BETTER_AUTH_URL||V.NEXT_PUBLIC_BETTER_AUTH_URL||V.PUBLIC_BETTER_AUTH_URL||V.NUXT_PUBLIC_BETTER_AUTH_URL||V.NUXT_PUBLIC_AUTH_URL||("/"!==V.BASE_URL?V.BASE_URL:void 0);if(e)return ei(e,t)}n?.headers.get("x-forwarded-host"),n?.headers.get("x-forwarded-proto");if(n){let e=function(e){try{let t=new URL(e);return"null"===t.origin?null:t.origin}catch{return null}}(n.url);if(!e)throw new eo("Could not get origin from request. Please provide a valid base URL.");return ei(e,t)}if("undefined"!=typeof window&&window.location)return ei(window.location.origin,t)}(e?.baseURL,e?.basePath,void 0,void 0)??"/api/auth",a=e?.plugins?.flatMap(e=>e.fetchPlugins).filter(e=>void 0!==e)||[],l={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:e?.fetchOptions?.onSuccess,onError:e?.fetchOptions?.onError,onRequest:e?.fetchOptions?.onRequest,onResponse:e?.fetchOptions?.onResponse}},{onSuccess:u,onError:c,onRequest:d,onResponse:f,...p}=e?.fetchOptions||{},h=(n={baseURL:i,...o?{credentials:"include"}:{},method:"GET",jsonParser:e=>e?function(e,t={strict:!0}){return function(e,t={}){let{strict:n=!1,warnings:r=!1,reviver:s,parseDates:o=!0}=t;if("string"!=typeof e)return e;let i=e.trim();if(i.length>0&&'"'===i[0]&&i.endsWith('"')&&!i.slice(1,-1).includes('"'))return i.slice(1,-1);let a=i.toLowerCase();if(a.length<=9&&a in ec)return ec[a];if(!eu.test(i)){if(n)throw SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries(el).some(([e,t])=>{let n=t.test(i);return n&&r&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${e} pattern`),n})&&n)throw Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(i,(e,t)=>{if("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t){r&&console.warn(`[better-json] Dropping "${e}" key to prevent prototype pollution`);return}if(o&&"string"==typeof t){let e=function(e){let t=ed.exec(e);if(!t)return null;let[,n,r,s,o,i,a,l,u,c,d]=t,f=new Date(Date.UTC(parseInt(n,10),parseInt(r,10)-1,parseInt(s,10),parseInt(o,10),parseInt(i,10),parseInt(a,10),l?parseInt(l.padEnd(3,"0"),10):0));if(u){let e=(60*parseInt(c,10)+parseInt(d,10))*("+"===u?-1:1);f.setUTCMinutes(f.getUTCMinutes()+e)}return f instanceof Date&&!isNaN(f.getTime())?f:null}(t);if(e)return e}return s?s(e,t):t})}catch(t){if(n)throw t;return e}}(e,t)}(e,{strict:!1}):null,customFetchImpl:fetch,...p,plugins:[l,...p.plugins||[],...e?.disableDefaultFetchPlugins?[]:[ea],...a]},async function(e,t){let r,s=ek(eP(eP({},n),t),{plugins:[...(null==n?void 0:n.plugins)||[],(r=n||{},{id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,t){var n,s,o,i;let a=(null==(s=null==(n=r.plugins)?void 0:n.find(t=>{var n;return null!=(n=t.schema)&&!!n.config&&(e.startsWith(t.schema.config.baseURL||"")||e.startsWith(t.schema.config.prefix||""))}))?void 0:s.schema)||r.schema;if(a){let n=e;(null==(o=a.config)?void 0:o.prefix)&&n.startsWith(a.config.prefix)&&(n=n.replace(a.config.prefix,""),a.config.baseURL&&(e=e.replace(a.config.prefix,a.config.baseURL))),(null==(i=a.config)?void 0:i.baseURL)&&n.startsWith(a.config.baseURL)&&(n=n.replace(a.config.baseURL,""));let r=a.schema[n];if(r){let n=ek(eP({},t),{method:r.method,output:r.output});return(null==t?void 0:t.disableValidation)||(n=ek(eP({},n),{body:r.input?await eY(r.input,null==t?void 0:t.body):null==t?void 0:t.body,params:r.params?await eY(r.params,null==t?void 0:t.params):null==t?void 0:t.params,query:r.query?await eY(r.query,null==t?void 0:t.query):null==t?void 0:t.query})),{url:e,options:n}}}return{url:e,options:t}}}),...(null==t?void 0:t.plugins)||[]]});if(null==n?void 0:n.catchAllError)try{return await eK(e,s)}catch(e){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:e}}}return await eK(e,s)}),{$sessionSignal:g,session:m}=(s=((e,t,n,r)=>{let s=eg({data:null,error:null,isPending:!0,isRefetching:!1,refetch:e=>o(e)}),o=async e=>new Promise(o=>{let i="function"==typeof r?r({data:s.get().data,error:s.get().error,isPending:s.get().isPending}):r;n(t,{...i,query:{...i?.query,...e?.query},async onSuccess(e){s.set({data:e.data,error:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await i?.onSuccess?.(e)},async onError(e){let{request:t}=e,n="number"==typeof t.retry?t.retry:t.retry?.attempts,r=t.retryAttempt||0;n&&r<n||(s.set({error:e.error,data:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await i?.onError?.(e))},async onRequest(e){let t=s.get();s.set({isPending:null===t.data,data:t.data,error:null,isRefetching:!0,refetch:s.value.refetch}),await i?.onRequest?.(e)}}).catch(e=>{s.set({error:e,data:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch})}).finally(()=>{o(void 0)})});e=Array.isArray(e)?e:[e];let i=!1;for(let t of e)t.subscribe(async()=>{eb()||(i?await o():em(s,()=>{let e=setTimeout(async()=>{i||(await o(),i=!0)},0);return()=>{s.off(),t.off(),clearTimeout(e)}}))});return s})(r=eg(!1),"/get-session",h,{method:"GET"}),em(s,()=>{let t=function(e){let{sessionAtom:t,sessionSignal:n,$fetch:r,options:s={}}=e,o=s.sessionOptions?.refetchInterval??0,i=s.sessionOptions?.refetchOnWindowFocus??!0,a=s.sessionOptions?.refetchWhenOffline??!1,l={lastSync:0,lastSessionRequest:0,cachedSession:void 0},u=e=>{if(!(a||eS().isOnline))return;if(e?.event==="storage"){l.lastSync=ej(),n.set(!n.get());return}let s=t.get();if(e?.event==="poll"){l.lastSessionRequest=ej(),r("/get-session").then(e=>{e.error?t.set({...s,data:null,error:e.error}):t.set({...s,data:e.data,error:null}),l.lastSync=ej(),n.set(!n.get())}).catch(()=>{});return}if(e?.event==="visibilitychange"){if(ej()-l.lastSessionRequest<5)return;l.lastSessionRequest=ej()}(s?.data===null||s?.data===void 0||e?.event==="visibilitychange")&&(l.lastSync=ej(),n.set(!n.get()))};return{init:()=>{o&&o>0&&(l.pollInterval=setInterval(()=>{t.get()?.data&&u({event:"poll"})},1e3*o)),l.unsubscribeBroadcast=ew().subscribe(()=>{u({event:"storage"})}),i&&(l.unsubscribeFocus=eR().subscribe(()=>{u({event:"visibilitychange"})})),l.unsubscribeOnline=eS().subscribe(e=>{e&&u({event:"visibilitychange"})}),ew().setup(),eR().setup(),eS().setup()},cleanup:()=>{l.pollInterval&&(clearInterval(l.pollInterval),l.pollInterval=void 0),l.unsubscribeBroadcast&&(l.unsubscribeBroadcast(),l.unsubscribeBroadcast=void 0),l.unsubscribeFocus&&(l.unsubscribeFocus(),l.unsubscribeFocus=void 0),l.unsubscribeOnline&&(l.unsubscribeOnline(),l.unsubscribeOnline=void 0),l.lastSync=0,l.lastSessionRequest=0,l.cachedSession=void 0},triggerRefetch:u,broadcastSessionUpdate:e=>{ew().post({event:"session",data:{trigger:e},clientId:Math.random().toString(36).substring(7)})}}}({sessionAtom:s,sessionSignal:r,$fetch:h,options:e});return t.init(),()=>{t.cleanup()}}),{session:s,$sessionSignal:r}),b=e?.plugins||[],y={},v={$sessionSignal:g,session:m},w={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"},x=[{signal:"$sessionSignal",matcher:e=>"/sign-out"===e||"/update-user"===e||"/sign-up/email"===e||"/sign-in/email"===e||"/delete-user"===e||"/verify-email"===e||"/revoke-sessions"===e||"/revoke-session"===e||"/change-email"===e}];for(let e of b)e.getAtoms&&Object.assign(v,e.getAtoms?.(h)),e.pathMethods&&Object.assign(w,e.pathMethods),e.atomListeners&&x.push(...e.atomListeners);let T={notify:e=>{v[e].set(!v[e].get())},listen:(e,t)=>{v[e].subscribe(t)},atoms:v};for(let t of b)t.getActions&&Object.assign(y,t.getActions?.(h,T,e));return{get baseURL(){return i},pluginsActions:y,pluginsAtoms:v,pluginPathMethods:w,atomListeners:x,$fetch:h,$store:T}})(e),u={};for(let[e,t]of Object.entries(o))u[function(e){return`use${e.charAt(0).toUpperCase()+e.slice(1)}`}(e)]=()=>(function(e,t={}){let n=(0,s.useRef)(e.get()),{keys:r,deps:o=[e,r]}=t,i=(0,s.useCallback)(t=>{let s=e=>{n.current!==e&&(n.current=e,t())};if(s(e.value),r?.length){let t;return t=new Set(r).add(void 0),e.listen((e,n,r)=>{t.has(r)&&s(e,n,r)})}return e.listen(s)},o),a=()=>n.current;return(0,s.useSyncExternalStore)(i,a,a)})(t);return t={...r,...u,$fetch:i,$store:a},function e(r=[]){return new Proxy(function(){},{get(n,s){var o;if("string"!=typeof s||"then"===s||"catch"===s||"finally"===s)return;let i=[...r,s],a=t;for(let e of i)if(a&&"object"==typeof a&&e in a)a=a[e];else{a=void 0;break}return"function"==typeof a?a:"object"==typeof(o=a)&&null!==o&&"get"in o&&"function"==typeof o.get&&"lc"in o&&"number"==typeof o.lc?a:e(i)},apply:async(e,t,s)=>{let a="/"+r.map(e=>e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)).join("/"),u=s[0]||{},c=s[1]||{},{query:d,fetchOptions:f,...p}=u,h={...c,...f},g=function(e,t,n){let r=t[e],{fetchOptions:s,query:o,...i}=n||{};return r||(s?.method?s.method:i&&Object.keys(i).length>0?"POST":"GET")}(a,n,u);return await i(a,{...h,body:"GET"===g?void 0:{...p,...h?.body||{}},query:d||h?.query,method:g,async onSuccess(e){if(await h?.onSuccess?.(e),!l||h.disableSignal)return;let t=l.filter(e=>e.matcher(a));if(!t.length)return;let n=new Set;for(let e of t){let t=o[e.signal];if(!t)return;if(n.has(e.signal))continue;n.add(e.signal);let r=t.get();setTimeout(()=>{t.set(!r)},10)}}})}})}()}({baseURL:H.default.env.NEXT_PUBLIC_BETTER_AUTH_URL});var eZ=e.i(846696),eQ=e.i(292270),e0=e.i(531278);function e1({user:e,toggleSidebar:t}){let n=(0,i.usePathname)();(0,i.useRouter)();let[l,u]=(0,s.useState)(!1),c=e?.name?e.name.split(" ")[0]:"User",d=e?.name||"User",f=e?.role?.name||"No Role",p=R(e?.roleId),h=async()=>{try{u(!0),eZ.toast.loading("Logging out...",{id:"logout"}),await eX.signOut({fetchOptions:{onSuccess:()=>{eZ.toast.success("Logged out successfully",{id:"logout"}),window.location.href="/auth/login"},onError:e=>{console.error("Logout error:",e),eZ.toast.error("Failed to logout. Please try again.",{id:"logout"}),u(!1)}}})}catch(e){console.error("Logout error:",e),eZ.toast.error("An error occurred during logout",{id:"logout"}),u(!1)}};return(0,r.jsxs)("header",{className:"flex h-14 items-center gap-4 border-b bg-gray-100/40 px-6 lg:h-[60px] dark:bg-gray-800/40",children:[(0,r.jsxs)(I,{children:[(0,r.jsx)(P,{asChild:!0,children:(0,r.jsxs)(j.Button,{className:"shrink-0 lg:hidden",size:"icon",variant:"outline",children:[(0,r.jsx)(O.default,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle navigation menu"})]})}),(0,r.jsxs)($,{side:"left",children:[(0,r.jsx)(B,{children:(0,r.jsx)(q,{className:"sr-only",children:"Navigation Menu"})}),(0,r.jsxs)("nav",{className:"grid gap-2 text-lg font-medium",children:[(0,r.jsxs)(o.default,{className:"flex items-center gap-2 text-lg font-semibold mb-4",href:"#",children:[(0,r.jsx)(a.default,{className:"h-6 w-6"}),(0,r.jsx)("span",{children:"Framada"})]}),p.map((e,t)=>(0,r.jsxs)(o.default,{className:`mx-[-0.65rem] flex items-center gap-4 rounded-xl px-3 py-2 text-muted-foreground hover:text-foreground ${n===e.href?"bg-muted text-foreground":""}`,href:e.href,children:[(0,r.jsx)(e.icon,{className:"h-5 w-5"}),e.label]},t))]})]})]}),(0,r.jsxs)("div",{className:"w-full flex-1 flex items-center gap-4",children:[(0,r.jsxs)(j.Button,{className:"hidden lg:flex",size:"icon",variant:"outline",onClick:t,children:[(0,r.jsx)(O.default,{className:"h-5 w-5"}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle sidebar"})]}),(0,r.jsx)("form",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(S.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-gray-500 dark:text-gray-400"}),(0,r.jsx)(L.Input,{className:"w-full bg-white shadow-none appearance-none pl-8 md:w-2/3 lg:w-1/3 dark:bg-gray-950",placeholder:"Search...",type:"search"})]})})]}),(0,r.jsxs)(N.DropdownMenu,{children:[(0,r.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,r.jsxs)(j.Button,{className:"rounded-full flex items-center gap-2 px-3",variant:"secondary",children:[(0,r.jsxs)(F.Avatar,{className:"h-8 w-8",children:[(0,r.jsx)(F.AvatarImage,{src:e?.image||void 0,alt:d}),(0,r.jsx)(F.AvatarFallback,{children:d.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2)})]}),(0,r.jsx)("span",{className:"hidden md:block text-sm font-medium",children:c}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle user menu"})]})}),(0,r.jsxs)(N.DropdownMenuContent,{align:"end",className:"w-56",children:[(0,r.jsxs)(N.DropdownMenuLabel,{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"font-semibold",children:d}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground font-normal",children:f})]}),(0,r.jsx)(N.DropdownMenuSeparator,{}),(0,r.jsx)(N.DropdownMenuItem,{onClick:h,disabled:l,className:"cursor-pointer",children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e0.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Logging out..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eQ.LogOut,{className:"mr-2 h-4 w-4"}),"Logout"]})})]})]})]})}function e4({children:e,user:t}){let[n,o]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:`grid min-h-screen w-full transition-all duration-300 ${n?"grid-cols-[80px_1fr]":"lg:grid-cols-[280px_1fr]"}`,children:[(0,r.jsx)(E,{isCollapsed:n,toggleCollapse:()=>o(!n),user:t}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(e1,{user:t,toggleSidebar:()=>o(!n)}),(0,r.jsx)("main",{className:"flex flex-1 flex-col gap-4 p-4 lg:gap-6 lg:p-6",children:e})]})]})}e.s(["DashboardShell",()=>e4],330159)}]);