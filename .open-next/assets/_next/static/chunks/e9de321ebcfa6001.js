(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,269035,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(248425),i="horizontal",n=["horizontal","vertical"],s=a.forwardRef((e,a)=>{var s;let{decorative:l,orientation:o=i,...d}=e,c=(s=o,n.includes(s))?o:i;return(0,t.jsx)(r.Primitive.div,{"data-orientation":c,...l?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:a})});s.displayName="Separator";var l=e.i(647163);let o=a.forwardRef(({className:e,orientation:a="horizontal",decorative:r=!0,...i},n)=>(0,t.jsx)(s,{ref:n,decorative:r,orientation:a,className:(0,l.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...i}));o.displayName=s.displayName,e.s(["Separator",()=>o],269035)},488143,(e,t,a)=>{"use strict";function r({widthInt:e,heightInt:t,blurWidth:a,blurHeight:r,blurDataURL:i,objectFit:n}){let s=a?40*a:e,l=r?40*r:t,o=s&&l?`viewBox='0 0 ${s} ${l}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${o}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${o?"none":"contain"===n?"xMidYMid":"cover"===n?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${i}'/%3E%3C/svg%3E`}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},987690,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={VALID_LOADERS:function(){return n},imageConfigDefault:function(){return s}};for(var i in r)Object.defineProperty(a,i,{enumerable:!0,get:r[i]});let n=["default","imgix","cloudinary","akamai","custom"],s={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},908927,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"getImgProps",{enumerable:!0,get:function(){return d}}),e.r(233525);let r=e.r(543369),i=e.r(488143),n=e.r(987690),s=["-moz-initial","fill","none","scale-down",void 0];function l(e){return void 0!==e.default}function o(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function d({src:e,sizes:t,unoptimized:a=!1,priority:d=!1,preload:c=!1,loading:u,className:f,quality:p,width:m,height:g,fill:h=!1,style:v,overrideSrc:y,onLoad:x,onLoadingComplete:b,placeholder:j="empty",blurDataURL:w,fetchPriority:S,decoding:C="async",layout:_,objectFit:P,objectPosition:R,lazyBoundary:N,lazyRoot:O,...M},D){var E;let k,z,I,{imgConf:T,showAltText:$,blurComplete:L,defaultLoader:F}=D,U=T||n.imageConfigDefault;if("allSizes"in U)k=U;else{let e=[...U.deviceSizes,...U.imageSizes].sort((e,t)=>e-t),t=U.deviceSizes.sort((e,t)=>e-t),a=U.qualities?.sort((e,t)=>e-t);k={...U,allSizes:e,deviceSizes:t,qualities:a}}if(void 0===F)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let A=M.loader||F;delete M.loader,delete M.srcSet;let B="__next_img_default"in A;if(B){if("custom"===k.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=A;A=t=>{let{config:a,...r}=t;return e(r)}}if(_){"fill"===_&&(h=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[_];e&&(v={...v,...e});let a={responsive:"100vw",fill:"100vw"}[_];a&&!t&&(t=a)}let q="",G=o(m),H=o(g);if((E=e)&&"object"==typeof E&&(l(E)||void 0!==E.src)){let t=l(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(z=t.blurWidth,I=t.blurHeight,w=w||t.blurDataURL,q=t.src,!h)if(G||H){if(G&&!H){let e=G/t.width;H=Math.round(t.height*e)}else if(!G&&H){let e=H/t.height;G=Math.round(t.width*e)}}else G=t.width,H=t.height}let V=!d&&!c&&("lazy"===u||void 0===u);(!(e="string"==typeof e?e:q)||e.startsWith("data:")||e.startsWith("blob:"))&&(a=!0,V=!1),k.unoptimized&&(a=!0),B&&!k.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(a=!0);let W=o(p),X=Object.assign(h?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:P,objectPosition:R}:{},$?{}:{color:"transparent"},v),J=L||"empty"===j?null:"blur"===j?`url("data:image/svg+xml;charset=utf-8,${(0,i.getImageBlurSvg)({widthInt:G,heightInt:H,blurWidth:z,blurHeight:I,blurDataURL:w||"",objectFit:X.objectFit})}")`:`url("${j}")`,K=s.includes(X.objectFit)?"fill"===X.objectFit?"100% 100%":"cover":X.objectFit,Y=J?{backgroundSize:K,backgroundPosition:X.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:J}:{},Q=function({config:e,src:t,unoptimized:a,width:i,quality:n,sizes:s,loader:l}){if(a){let e=(0,r.getDeploymentId)();if(t.startsWith("/")&&!t.startsWith("//")&&e){let a=t.includes("?")?"&":"?";t=`${t}${a}dpl=${e}`}return{src:t,srcSet:void 0,sizes:void 0}}let{widths:o,kind:d}=function({deviceSizes:e,allSizes:t},a,r){if(r){let a=/(^|\s)(1?\d?\d)vw/g,i=[];for(let e;e=a.exec(r);)i.push(parseInt(e[2]));if(i.length){let a=.01*Math.min(...i);return{widths:t.filter(t=>t>=e[0]*a),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof a?{widths:e,kind:"w"}:{widths:[...new Set([a,2*a].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,i,s),c=o.length-1;return{sizes:s||"w"!==d?s:"100vw",srcSet:o.map((a,r)=>`${l({config:e,src:t,quality:n,width:a})} ${"w"===d?a:r+1}${d}`).join(", "),src:l({config:e,src:t,quality:n,width:o[c]})}}({config:k,src:e,unoptimized:a,width:G,quality:W,sizes:t,loader:A}),Z=V?"lazy":u;return{props:{...M,loading:Z,fetchPriority:S,width:G,height:H,decoding:C,className:f,style:{...X,...Y},sizes:Q.sizes,srcSet:Q.srcSet,src:y||Q.src},meta:{unoptimized:a,preload:c||d,placeholder:j,fill:h}}}},898879,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return l}});let r=e.r(271645),i="undefined"==typeof window,n=i?()=>{}:r.useLayoutEffect,s=i?()=>{}:r.useEffect;function l(e){let{headManager:t,reduceComponentsToState:a}=e;function l(){if(t&&t.mountedInstances){let e=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(a(e))}}return i&&(t?.mountedInstances?.add(e.children),l()),n(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),n(()=>(t&&(t._pendingUpdate=l),()=>{t&&(t._pendingUpdate=l)})),s(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},325633,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={default:function(){return g},defaultHead:function(){return u}};for(var i in r)Object.defineProperty(a,i,{enumerable:!0,get:r[i]});let n=e.r(555682),s=e.r(190809),l=e.r(843476),o=s._(e.r(271645)),d=n._(e.r(898879)),c=e.r(742732);function u(){return[(0,l.jsx)("meta",{charSet:"utf-8"},"charset"),(0,l.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function f(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===o.default.Fragment?e.concat(o.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(233525);let p=["name","httpEquiv","charSet","itemProp"];function m(e){let t,a,r,i;return e.reduce(f,[]).reverse().concat(u().reverse()).filter((t=new Set,a=new Set,r=new Set,i={},e=>{let n=!0,s=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){s=!0;let a=e.key.slice(e.key.indexOf("$")+1);t.has(a)?n=!1:t.add(a)}switch(e.type){case"title":case"base":a.has(e.type)?n=!1:a.add(e.type);break;case"meta":for(let t=0,a=p.length;t<a;t++){let a=p[t];if(e.props.hasOwnProperty(a))if("charSet"===a)r.has(a)?n=!1:r.add(a);else{let t=e.props[a],r=i[a]||new Set;("name"!==a||!s)&&r.has(t)?n=!1:(r.add(t),i[a]=r)}}}return n})).reverse().map((e,t)=>{let a=e.key||t;return o.default.cloneElement(e,{key:a})})}let g=function({children:e}){let t=(0,o.useContext)(c.HeadManagerContext);return(0,l.jsx)(d.default,{reduceComponentsToState:m,headManager:t,children:e})};("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},918556,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"ImageConfigContext",{enumerable:!0,get:function(){return n}});let r=e.r(555682)._(e.r(271645)),i=e.r(987690),n=r.default.createContext(i.imageConfigDefault)},65856,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"RouterContext",{enumerable:!0,get:function(){return r}});let r=e.r(555682)._(e.r(271645)).default.createContext(null)},670965,(e,t,a)=>{"use strict";function r(e,t){let a=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-a)<Math.abs(e-a)?t:e,0):a}Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"findClosestQuality",{enumerable:!0,get:function(){return r}})},1948,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return s}});let r=e.r(670965),i=e.r(543369);function n({config:e,src:t,width:a,quality:n}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let s=(0,r.findClosestQuality)(n,e),l=(0,i.getDeploymentId)();return`${e.path}?url=${encodeURIComponent(t)}&w=${a}&q=${s}${t.startsWith("/")&&l?`&dpl=${l}`:""}`}n.__next_img_default=!0;let s=n},605500,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"Image",{enumerable:!0,get:function(){return b}});let r=e.r(555682),i=e.r(190809),n=e.r(843476),s=i._(e.r(271645)),l=r._(e.r(174080)),o=r._(e.r(325633)),d=e.r(908927),c=e.r(987690),u=e.r(918556);e.r(233525);let f=e.r(65856),p=r._(e.r(1948)),m=e.r(818581),g={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function h(e,t,a,r,i,n,s){let l=e?.src;e&&e["data-loaded-src"]!==l&&(e["data-loaded-src"]=l,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&i(!0),a?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,i=!1;a.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>i,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{i=!0,t.stopPropagation()}})}r?.current&&r.current(e)}}))}function v(e){return s.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let y=(0,s.forwardRef)(({src:e,srcSet:t,sizes:a,height:r,width:i,decoding:l,className:o,style:d,fetchPriority:c,placeholder:u,loading:f,unoptimized:p,fill:g,onLoadRef:y,onLoadingCompleteRef:x,setBlurComplete:b,setShowAltText:j,sizesInput:w,onLoad:S,onError:C,..._},P)=>{let R=(0,s.useCallback)(e=>{e&&(C&&(e.src=e.src),e.complete&&h(e,u,y,x,b,p,w))},[e,u,y,x,b,C,p,w]),N=(0,m.useMergedRef)(P,R);return(0,n.jsx)("img",{..._,...v(c),loading:f,width:i,height:r,decoding:l,"data-nimg":g?"fill":"1",className:o,style:d,sizes:a,srcSet:t,src:e,ref:N,onLoad:e=>{h(e.currentTarget,u,y,x,b,p,w)},onError:e=>{j(!0),"empty"!==u&&b(!0),C&&C(e)}})});function x({isAppRouter:e,imgAttributes:t}){let a={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...v(t.fetchPriority)};return e&&l.default.preload?(l.default.preload(t.src,a),null):(0,n.jsx)(o.default,{children:(0,n.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...a},"__nimg-"+t.src+t.srcSet+t.sizes)})}let b=(0,s.forwardRef)((e,t)=>{let a=(0,s.useContext)(f.RouterContext),r=(0,s.useContext)(u.ImageConfigContext),i=(0,s.useMemo)(()=>{let e=g||r||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),a=e.deviceSizes.sort((e,t)=>e-t),i=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:a,qualities:i,localPatterns:"undefined"==typeof window?r?.localPatterns:e.localPatterns}},[r]),{onLoad:l,onLoadingComplete:o}=e,m=(0,s.useRef)(l);(0,s.useEffect)(()=>{m.current=l},[l]);let h=(0,s.useRef)(o);(0,s.useEffect)(()=>{h.current=o},[o]);let[v,b]=(0,s.useState)(!1),[j,w]=(0,s.useState)(!1),{props:S,meta:C}=(0,d.getImgProps)(e,{defaultLoader:p.default,imgConf:i,blurComplete:v,showAltText:j});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(y,{...S,unoptimized:C.unoptimized,placeholder:C.placeholder,fill:C.fill,onLoadRef:m,onLoadingCompleteRef:h,setBlurComplete:b,setShowAltText:w,sizesInput:e.sizes,ref:t}),C.preload?(0,n.jsx)(x,{isAppRouter:!a,imgAttributes:S}):null]})});("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},794909,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={default:function(){return c},getImageProps:function(){return d}};for(var i in r)Object.defineProperty(a,i,{enumerable:!0,get:r[i]});let n=e.r(555682),s=e.r(908927),l=e.r(605500),o=n._(e.r(1948));function d(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let c=l.Image},657688,(e,t,a)=>{t.exports=e.r(794909)},460467,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(167881),i=e.i(37727),n=e.i(569074),s=e.i(531278),l=e.i(783447),o=e.i(647163),d=e.i(846696);function c({images:e,onChange:c,maxImages:u=10,maxSize:f=5242880,patientName:p,patientCreatedDate:m}){let[g,h]=(0,a.useState)(!1),[{files:v,isDragging:y,errors:x},{removeFile:b,handleDragEnter:j,handleDragLeave:w,handleDragOver:S,handleDrop:C,openFileDialog:_,getInputProps:P,fileInputRef:R}]=(0,l.useFileUpload)({maxFiles:u-e.length,maxSize:f,accept:"image/*",multiple:!0,onFilesChange:async t=>{if(0!==t.length){h(!0);try{let a=[];for(let r=0;r<t.length;r++){let i=t[r],n=e.length+r+1,s=new FormData;s.append("file",i),s.append("folder","treatments"),s.append("name",p),s.append("index",n.toString());let l=String(m.getDate()).padStart(2,"0"),o=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"][m.getMonth()],c=m.getFullYear(),u=`${l}${o}${c}`,f=p.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"_"),g=`${f}_${u}`;s.append("subfolder",g);let h=await fetch("/api/upload",{method:"POST",body:s}),v=await h.json();if(!v.success){d.toast.error(v.error||`Failed to upload image ${r+1}`);continue}a.push(v.url)}a.length>0&&c([...e,...a]),t.forEach(e=>b(e.id))}catch(e){console.error("Error uploading images:",e),d.toast.error("Failed to upload images")}finally{h(!1)}}}});return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:(0,o.cn)("border-2 border-dashed rounded-lg p-6 transition-colors cursor-pointer",y?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50",g&&"opacity-50 pointer-events-none"),onDragEnter:j,onDragLeave:w,onDragOver:S,onDrop:C,onClick:_,children:[(0,t.jsx)("input",{...P(),ref:R,className:"hidden"}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[g?(0,t.jsx)(s.Loader2,{className:"h-8 w-8 text-muted-foreground animate-spin"}):(0,t.jsx)(n.Upload,{className:"h-8 w-8 text-muted-foreground"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:g?"Uploading...":"Click or drag images here"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["PNG, JPG up to ",(0,l.formatBytes)(f)," (max ",u," images)"]})]})]})]}),x.length>0&&(0,t.jsx)("div",{className:"text-sm text-destructive",children:x.map((e,a)=>(0,t.jsx)("p",{children:e},a))}),e.length>0&&(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mt-4",children:e.map((a,n)=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"aspect-square rounded-lg overflow-hidden border border-muted",children:(0,t.jsx)("img",{src:a,alt:`Attachment ${n+1}`,className:"w-full h-full object-cover"})}),(0,t.jsx)(r.Button,{type:"button",size:"icon",variant:"destructive",className:"absolute top-2 right-2 h-6 w-6 opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>{t.stopPropagation(),c(e.filter((e,t)=>t!==n))},children:(0,t.jsx)(i.X,{className:"h-4 w-4"})})]},n))})]})}e.s(["ImageUpload",()=>c])},360200,e=>{"use strict";let t=(0,e.i(475254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["default",()=>t])},788699,e=>{"use strict";var t=e.i(360200);e.s(["Pencil",()=>t.default])},373488,e=>{"use strict";let t=(0,e.i(475254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["default",()=>t])},541071,e=>{"use strict";var t=e.i(373488);e.s(["MoreHorizontal",()=>t.default])},470152,e=>{"use strict";function t(e,[t,a]){return Math.min(a,Math.max(t,e))}e.s(["clamp",()=>t])},631171,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["default",()=>t])},399219,e=>{"use strict";let t=(0,e.i(475254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["default",()=>t])},612329,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>t])},727612,e=>{"use strict";var t=e.i(612329);e.s(["Trash2",()=>t.default])},95187,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={callServer:function(){return n.callServer},createServerReference:function(){return l.createServerReference},findSourceMapURL:function(){return s.findSourceMapURL}};for(var i in r)Object.defineProperty(a,i,{enumerable:!0,get:r[i]});let n=e.r(132120),s=e.r(92245),l=e.r(235326)},10708,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(248425),i=a.forwardRef((e,a)=>(0,t.jsx)(r.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var n=e.i(225913),s=e.i(647163);let l=(0,n.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(i,{ref:r,className:(0,s.cn)(l(),e),...a}));o.displayName=i.displayName,e.s(["Label",()=>o],10708)},630374,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(326999),i=e.i(37727),n=e.i(647163);let s=r.Root,l=r.Trigger,o=r.Portal;r.Close;let d=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(r.Overlay,{ref:i,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));d.displayName=r.Overlay.displayName;let c=a.forwardRef(({className:e,children:a,...s},l)=>(0,t.jsxs)(o,{children:[(0,t.jsx)(d,{}),(0,t.jsxs)(r.Content,{ref:l,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[a,(0,t.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.X,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=r.Content.displayName;let u=({className:e,...a})=>(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});u.displayName="DialogHeader";let f=({className:e,...a})=>(0,t.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});f.displayName="DialogFooter";let p=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(r.Title,{ref:i,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...a}));p.displayName=r.Title.displayName;let m=a.forwardRef(({className:e,...a},i)=>(0,t.jsx)(r.Description,{ref:i,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));m.displayName=r.Description.displayName,e.s(["Dialog",()=>s,"DialogContent",()=>c,"DialogDescription",()=>m,"DialogFooter",()=>f,"DialogHeader",()=>u,"DialogTitle",()=>p,"DialogTrigger",()=>l])},783447,e=>{"use strict";var t=e.i(271645);function a(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}function r(e={}){let{maxFiles:i=1,maxSize:n=5242880,accept:s,multiple:l=!1,onFilesChange:o}=e,[d,c]=(0,t.useState)([]),[u,f]=(0,t.useState)(!1),[p,m]=(0,t.useState)([]),g=(0,t.useRef)(null),h=(0,t.useRef)(0),v=(0,t.useCallback)(e=>{if(n&&e.size>n)return`File "${e.name}" exceeds maximum size of ${a(n)}`;if(s){let t=s.split(",").map(e=>e.trim()),a=e.type,r="."+e.name.split(".").pop()?.toLowerCase();if(!t.some(e=>a.match(e.replace("*",".*"))||r.match(e.replace("*",".*"))))return`File "${e.name}" is not an accepted file type. Accepted: ${s}`}return null},[n,s]),y=(0,t.useCallback)(e=>{let t=Array.from(e),a=[],r=[],n=i-d.length;if(t.length>n&&(r.push(`Maximum ${i} file(s) allowed. Only ${n} slot(s) remaining.`),t.splice(n)),t.forEach(e=>{let t=v(e);if(t)r.push(t);else{let t,r;a.push((t=Math.random().toString(36).substring(2,9),r=URL.createObjectURL(e),Object.assign(e,{id:t,preview:r})))}}),a.length>0){let e=l?[...d,...a]:a;c(e),o?.(e)}r.length>0&&(m(r),setTimeout(()=>m([]),5e3))},[d,i,l,o,v]),x=(0,t.useCallback)(e=>{let t=d.find(t=>t.id===e);t&&URL.revokeObjectURL(t.preview);let a=d.filter(t=>t.id!==e);c(a),o?.(a)},[d,o]),b=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&f(!0)},[]),j=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),h.current--,0===h.current&&f(!1)},[]),w=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),S=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),f(!1),h.current=0,e.dataTransfer.files&&e.dataTransfer.files.length>0&&y(e.dataTransfer.files)},[y]),C=(0,t.useCallback)(()=>{g.current?.click()},[]),_=(0,t.useCallback)(e=>{e.target.files&&e.target.files.length>0&&y(e.target.files),e.target.value=""},[y]);return[{files:d,isDragging:u,errors:p},{removeFile:x,handleDragEnter:b,handleDragLeave:j,handleDragOver:w,handleDrop:S,openFileDialog:C,getInputProps:(0,t.useCallback)(()=>({onChange:_,accept:s,multiple:l,type:"file"}),[_,s,l]),fileInputRef:g}]}e.s(["formatBytes",()=>a,"useFileUpload",()=>r])},720652,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("00e2de6287a4a524275d3062b7807153f37f15f83d",t.callServer,void 0,t.findSourceMapURL,"getDoctors");e.s(["getDoctors",()=>a])},643011,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("40e7b0ba18bce6b9213ba6db470670ae2bc556df5d",t.callServer,void 0,t.findSourceMapURL,"deleteMedicalRecord");e.s(["deleteMedicalRecord",()=>a])},610238,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("60368b818ee2921c200efe20d23c4c4147434d073e",t.callServer,void 0,t.findSourceMapURL,"updateMedicalRecord");e.s(["updateMedicalRecord",()=>a])},160625,e=>{"use strict";var t=e.i(843476),a=e.i(271645),r=e.i(167881),i=e.i(630374),n=e.i(10708),s=e.i(184762),l=e.i(531278),o=e.i(610238),d=e.i(720652),c=e.i(846696),u=e.i(62870),f=e.i(618566),p=e.i(460467);function m({open:e,onOpenChange:m,record:g}){let h=(0,f.useRouter)(),[v,y]=(0,a.useState)(!1),[x,b]=(0,a.useState)([]),[j,w]=(0,a.useState)({doctorId:"",complaint:"",examination:"",diagnosis:"",treatment:"",prescription:"",notes:""}),[S,C]=(0,a.useState)([]),[_,P]=(0,a.useState)(g?.id);if(g&&g.id!==_)if(P(g.id),w({doctorId:g.doctorId||"",complaint:g.complaint||"",examination:g.examination||"",diagnosis:g.diagnosis||"",treatment:g.treatment||"",prescription:g.prescription||"",notes:g.notes||""}),g.attachments)try{let e=JSON.parse(g.attachments);C(Array.isArray(e)?e:[])}catch{C([])}else C([]);async function R(e){e.preventDefault(),y(!0);let t={doctorId:j.doctorId,complaint:j.complaint||null,examination:j.examination||null,diagnosis:j.diagnosis||null,treatment:j.treatment||null,prescription:j.prescription||null,notes:j.notes||null,attachments:S.length>0?JSON.stringify(S):null},a=await (0,o.updateMedicalRecord)(g.id,t);y(!1),a.success?(m(!1),c.toast.success("Medical record updated successfully."),h.refresh()):c.toast.error(a.error||"Something went wrong.")}return((0,a.useEffect)(()=>{e&&(0,d.getDoctors)().then(e=>{e.success&&b(e.data||[])})},[e]),g)?(0,t.jsx)(i.Dialog,{open:e,onOpenChange:m,children:(0,t.jsx)(i.DialogContent,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:(0,t.jsxs)("form",{onSubmit:R,children:[(0,t.jsxs)(i.DialogHeader,{children:[(0,t.jsx)(i.DialogTitle,{children:"Edit Medical Record"}),(0,t.jsx)(i.DialogDescription,{children:"Update patient consultation and treatment details."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"doctorId",children:"Doctor"}),(0,t.jsxs)(u.Select,{value:j.doctorId,onValueChange:e=>w({...j,doctorId:e}),required:!0,children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Select doctor"})}),(0,t.jsx)(u.SelectContent,{children:x.map(e=>(0,t.jsx)(u.SelectItem,{value:e.id,children:e.user?.name||"Unknown"},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"complaint",children:"Chief Complaint"}),(0,t.jsx)(s.Textarea,{id:"complaint",value:j.complaint,onChange:e=>w({...j,complaint:e.target.value}),placeholder:"Reason for visit"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"examination",children:"Examination"}),(0,t.jsx)(s.Textarea,{id:"examination",value:j.examination,onChange:e=>w({...j,examination:e.target.value}),placeholder:"Physical/Clinical findings"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"diagnosis",children:"Diagnosis"}),(0,t.jsx)(s.Textarea,{id:"diagnosis",value:j.diagnosis,onChange:e=>w({...j,diagnosis:e.target.value}),placeholder:"Assessment/Diagnosis"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"treatment",children:"Treatment Plan"}),(0,t.jsx)(s.Textarea,{id:"treatment",value:j.treatment,onChange:e=>w({...j,treatment:e.target.value}),placeholder:"Proposed treatment"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"prescription",children:"Prescription"}),(0,t.jsx)(s.Textarea,{id:"prescription",value:j.prescription,onChange:e=>w({...j,prescription:e.target.value}),placeholder:"Medications prescribed"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"notes",children:"Additional Notes"}),(0,t.jsx)(s.Textarea,{id:"notes",value:j.notes,onChange:e=>w({...j,notes:e.target.value}),placeholder:"Other relevant information"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"Images"}),(0,t.jsx)(p.ImageUpload,{images:S,onChange:C,maxImages:10,maxSize:5242880,patientName:g.patient?.name||"patient",patientCreatedDate:new Date(g.patient?.createdAt||Date.now())})]})]}),(0,t.jsxs)(i.DialogFooter,{children:[(0,t.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Cancel"}),(0,t.jsxs)(r.Button,{type:"submit",disabled:v,children:[v&&(0,t.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Record"]})]})]})})}):null}e.s(["EditMedicalRecordDialog",()=>m])}]);