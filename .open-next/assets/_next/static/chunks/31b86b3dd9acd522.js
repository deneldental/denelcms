(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,275117,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(991918),r=e.i(463059),i=(e.i(541071),e.i(647163));let l=a.forwardRef(({...e},a)=>(0,t.jsx)("nav",{ref:a,"aria-label":"breadcrumb",...e}));l.displayName="Breadcrumb";let n=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("ol",{ref:s,className:(0,i.cn)("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",e),...a}));n.displayName="BreadcrumbList";let c=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("li",{ref:s,className:(0,i.cn)("inline-flex items-center gap-1.5",e),...a}));c.displayName="BreadcrumbItem";let d=a.forwardRef(({asChild:e,className:a,...r},l)=>{let n=e?s.Slot:"a";return(0,t.jsx)(n,{ref:l,className:(0,i.cn)("transition-colors hover:text-foreground",a),...r})});d.displayName="BreadcrumbLink";let o=a.forwardRef(({className:e,...a},s)=>(0,t.jsx)("span",{ref:s,role:"link","aria-disabled":"true","aria-current":"page",className:(0,i.cn)("font-normal text-foreground",e),...a}));o.displayName="BreadcrumbPage";let m=({children:e,className:a,...s})=>(0,t.jsx)("li",{role:"presentation","aria-hidden":"true",className:(0,i.cn)("[&>svg]:w-3.5 [&>svg]:h-3.5",a),...s,children:e??(0,t.jsx)(r.ChevronRight,{})});m.displayName="BreadcrumbSeparator",e.s(["Breadcrumb",()=>l,"BreadcrumbItem",()=>c,"BreadcrumbLink",()=>d,"BreadcrumbList",()=>n,"BreadcrumbPage",()=>o,"BreadcrumbSeparator",()=>m])},180127,e=>{"use strict";let t=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>t])},871689,e=>{"use strict";var t=e.i(180127);e.s(["ArrowLeft",()=>t.default])},360200,e=>{"use strict";let t=(0,e.i(475254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["default",()=>t])},788699,e=>{"use strict";var t=e.i(360200);e.s(["Pencil",()=>t.default])},582458,e=>{"use strict";let t=(0,e.i(475254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["default",()=>t])},878894,e=>{"use strict";var t=e.i(582458);e.s(["AlertTriangle",()=>t.default])},133308,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(630374),r=e.i(167881),i=e.i(878894);function l({open:e,onOpenChange:l,onConfirm:n,title:c,description:d,itemName:o,isLoading:m=!1}){let[u,p]=(0,a.useState)(!1),x=async()=>{p(!0);try{await n(),l(!1)}catch{}finally{p(!1)}};return(0,t.jsx)(s.Dialog,{open:e,onOpenChange:l,children:(0,t.jsxs)(s.DialogContent,{className:"sm:max-w-[425px]",children:[(0,t.jsx)(s.DialogHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-destructive/10",children:(0,t.jsx)(i.AlertTriangle,{className:"h-5 w-5 text-destructive"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(s.DialogTitle,{children:c}),(0,t.jsx)(s.DialogDescription,{className:"mt-1",children:d})]})]})}),o&&(0,t.jsxs)("div",{className:"py-4",children:[(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You are about to delete:"," ",(0,t.jsx)("span",{className:"font-semibold text-foreground",children:o})]}),(0,t.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:"This action cannot be undone."})]}),(0,t.jsxs)(s.DialogFooter,{children:[(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>l(!1),disabled:u||m,children:"Cancel"}),(0,t.jsx)(r.Button,{variant:"destructive",onClick:x,disabled:u||m,children:u||m?"Deleting...":"Delete"})]})]})})}e.s(["DeleteConfirmationDialog",()=>l])},783447,e=>{"use strict";var t=e.i(271645);function a(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}function s(e={}){let{maxFiles:r=1,maxSize:i=5242880,accept:l,multiple:n=!1,onFilesChange:c}=e,[d,o]=(0,t.useState)([]),[m,u]=(0,t.useState)(!1),[p,x]=(0,t.useState)([]),h=(0,t.useRef)(null),f=(0,t.useRef)(0),g=(0,t.useCallback)(e=>{if(i&&e.size>i)return`File "${e.name}" exceeds maximum size of ${a(i)}`;if(l){let t=l.split(",").map(e=>e.trim()),a=e.type,s="."+e.name.split(".").pop()?.toLowerCase();if(!t.some(e=>a.match(e.replace("*",".*"))||s.match(e.replace("*",".*"))))return`File "${e.name}" is not an accepted file type. Accepted: ${l}`}return null},[i,l]),j=(0,t.useCallback)(e=>{let t=Array.from(e),a=[],s=[],i=r-d.length;if(t.length>i&&(s.push(`Maximum ${r} file(s) allowed. Only ${i} slot(s) remaining.`),t.splice(i)),t.forEach(e=>{let t=g(e);if(t)s.push(t);else{let t,s;a.push((t=Math.random().toString(36).substring(2,9),s=URL.createObjectURL(e),Object.assign(e,{id:t,preview:s})))}}),a.length>0){let e=n?[...d,...a]:a;o(e),c?.(e)}s.length>0&&(x(s),setTimeout(()=>x([]),5e3))},[d,r,n,c,g]),v=(0,t.useCallback)(e=>{let t=d.find(t=>t.id===e);t&&URL.revokeObjectURL(t.preview);let a=d.filter(t=>t.id!==e);o(a),c?.(a)},[d,c]),y=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),f.current++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&u(!0)},[]),N=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),f.current--,0===f.current&&u(!1)},[]),b=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation()},[]),S=(0,t.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),u(!1),f.current=0,e.dataTransfer.files&&e.dataTransfer.files.length>0&&j(e.dataTransfer.files)},[j]),C=(0,t.useCallback)(()=>{h.current?.click()},[]),w=(0,t.useCallback)(e=>{e.target.files&&e.target.files.length>0&&j(e.target.files),e.target.value=""},[j]);return[{files:d,isDragging:m,errors:p},{removeFile:v,handleDragEnter:y,handleDragLeave:N,handleDragOver:b,handleDrop:S,openFileDialog:C,getInputProps:(0,t.useCallback)(()=>({onChange:w,accept:l,multiple:n,type:"file"}),[w,l,n]),fileInputRef:h}]}e.s(["formatBytes",()=>a,"useFileUpload",()=>s])},754347,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(167881),r=e.i(37727),i=e.i(569074),l=e.i(531278),n=e.i(783447),c=e.i(647163),d=e.i(846696);function o({image:e,onChange:o,maxSize:m=5242880,folder:u,entityName:p}){let[x,h]=(0,a.useState)(!1),[{isDragging:f,errors:g},{removeFile:j,handleDragEnter:v,handleDragLeave:y,handleDragOver:N,handleDrop:b,openFileDialog:S,getInputProps:C,fileInputRef:w}]=(0,n.useFileUpload)({maxFiles:1,maxSize:m,accept:"image/*",multiple:!1,onFilesChange:async e=>{if(0===e.length)return;let t=e[0];if(t.size>m){d.toast.error(`Image size exceeds the limit of ${(0,n.formatBytes)(m)}. Please choose a smaller image.`),j(t.id);return}h(!0);try{let e=new FormData;e.append("file",t),e.append("folder",u),e.append("name",p);let a=await fetch("/api/upload",{method:"POST",body:e}),s=await a.json();if(!s.success){d.toast.error(s.error||"Failed to upload image"),j(t.id);return}o(s.url),j(t.id)}catch(e){console.error("Error uploading image:",e),d.toast.error("Failed to upload image"),j(t.id)}finally{h(!1)}}});return(0,t.jsxs)("div",{className:"space-y-2",children:[e?(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("div",{className:"aspect-square w-full rounded-lg overflow-hidden border border-muted",children:(0,t.jsx)("img",{src:e,alt:"Product",className:"w-full h-full object-cover"})}),(0,t.jsx)(s.Button,{type:"button",size:"icon",variant:"destructive",className:"absolute top-2 right-2 h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>{e.stopPropagation(),o(null)},children:(0,t.jsx)(r.X,{className:"h-4 w-4"})})]}):(0,t.jsxs)("div",{className:(0,c.cn)("border-2 border-dashed rounded-lg p-6 transition-colors cursor-pointer",f?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-muted-foreground/50",x&&"opacity-50 pointer-events-none"),onDragEnter:v,onDragLeave:y,onDragOver:N,onDrop:b,onClick:S,children:[(0,t.jsx)("input",{...C(),ref:w,className:"hidden"}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[x?(0,t.jsx)(l.Loader2,{className:"h-8 w-8 text-muted-foreground animate-spin"}):(0,t.jsx)(i.Upload,{className:"h-8 w-8 text-muted-foreground"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:x?"Uploading...":"Click or drag image here"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["PNG, JPG up to ",(0,n.formatBytes)(m)]})]})]})]}),g.length>0&&(0,t.jsx)("div",{className:"text-sm text-destructive",children:g.map((e,a)=>(0,t.jsx)("p",{children:e},a))})]})}e.s(["SingleImageUpload",()=>o])},137695,102983,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("009ebcb79ad280b3f7d66adf8adb3fa6c6a9287ed6",t.callServer,void 0,t.findSourceMapURL,"getUnits");e.s(["getUnits",()=>a],137695);let s=(0,t.createServerReference)("00f0cc507774e3d62d80b2c3c5f07ad5a05f614a12",t.callServer,void 0,t.findSourceMapURL,"getCategories");e.s(["getCategories",()=>s],102983)},191727,e=>{"use strict";var t=e.i(843476),a=e.i(271645),s=e.i(167881),r=e.i(630374),i=e.i(23750),l=e.i(10708),n=e.i(531278),c=e.i(95187);let d=(0,c.createServerReference)("60dc2918f0553f9c873329c0e06058909105e6c304",c.callServer,void 0,c.findSourceMapURL,"updateInventoryItem");var o=e.i(846696),m=e.i(62870),u=e.i(618566),p=e.i(137695),x=e.i(102983),h=e.i(754347);function f({product:e,open:c,onOpenChange:f}){let[g,j]=(0,a.useState)(!1),v=(0,u.useRouter)(),[y,N]=(0,a.useState)([]),[b,S]=(0,a.useState)([]),[C,w]=(0,a.useState)(e.image||""),[k,D]=(0,a.useState)(e.id);async function B(t){t.preventDefault(),j(!0);let a=new FormData(t.currentTarget),s=a.get("name"),r=a.get("unit"),i={name:s,unit:r,category:a.get("category"),stockQuantity:parseInt(a.get("stockQuantity")),reorderLevel:e.reorderLevel||10,description:e.description||"",image:C||null},l=await d(e.id,i);j(!1),l.success?(f(!1),o.toast.success("Inventory item updated successfully."),v.refresh()):o.toast.error(l.error||"Something went wrong.")}return e.id!==k&&(D(e.id),w(e.image||"")),(0,a.useEffect)(()=>{c&&((0,p.getUnits)().then(e=>{e.success&&N(e.data||[])}),(0,x.getCategories)().then(e=>{e.success&&S(e.data||[])}))},[c]),(0,t.jsx)(r.Dialog,{open:c,onOpenChange:f,children:(0,t.jsx)(r.DialogContent,{className:"sm:max-w-[500px]",children:(0,t.jsxs)("form",{onSubmit:B,children:[(0,t.jsxs)(r.DialogHeader,{children:[(0,t.jsx)(r.DialogTitle,{children:"Edit Inventory Item"}),(0,t.jsx)(r.DialogDescription,{children:"Update inventory item details."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"edit-name",children:"Item Name"}),(0,t.jsx)(i.Input,{id:"edit-name",name:"name",defaultValue:e.name,required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"edit-unit",children:"Unit"}),(0,t.jsxs)(m.Select,{name:"unit",defaultValue:e.unit||"",required:!0,children:[(0,t.jsx)(m.SelectTrigger,{id:"edit-unit",children:(0,t.jsx)(m.SelectValue,{placeholder:"Select Unit"})}),(0,t.jsx)(m.SelectContent,{children:y.map(e=>(0,t.jsx)(m.SelectItem,{value:e.name,children:e.displayName||e.name},e.id))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"edit-category",children:"Category"}),(0,t.jsxs)(m.Select,{name:"category",defaultValue:e.category||"",required:!0,children:[(0,t.jsx)(m.SelectTrigger,{id:"edit-category",children:(0,t.jsx)(m.SelectValue,{placeholder:"Select Category"})}),(0,t.jsx)(m.SelectContent,{children:b.map(e=>(0,t.jsx)(m.SelectItem,{value:e.name,children:e.name.charAt(0).toUpperCase()+e.name.slice(1)},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{htmlFor:"edit-stockQuantity",children:"Quantity"}),(0,t.jsx)(i.Input,{id:"edit-stockQuantity",name:"stockQuantity",type:"number",defaultValue:e.stockQuantity,required:!0}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current inventory quantity"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(l.Label,{children:"Item Image (Optional)"}),(0,t.jsx)(h.SingleImageUpload,{image:C||null,onChange:e=>w(e||""),maxSize:5242880,folder:"inventory",entityName:e.name})]})]}),(0,t.jsx)(r.DialogFooter,{children:(0,t.jsxs)(s.Button,{type:"submit",disabled:g,children:[g&&(0,t.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})})]})})})}e.s(["EditInventoryDialog",()=>f],191727)},360927,e=>{"use strict";var t=e.i(95187);let a=(0,t.createServerReference)("403226d952eb7ac8556e4fe6fcc55b819966679e2f",t.callServer,void 0,t.findSourceMapURL,"deleteInventoryItem");e.s(["deleteInventoryItem",()=>a])},597179,e=>{"use strict";var t=e.i(843476),a=e.i(522016),s=e.i(275117),r=e.i(994179),i=e.i(167881),l=e.i(788699),n=e.i(727612),c=e.i(871689),d=e.i(401851),o=e.i(191727),m=e.i(271645),u=e.i(618566),p=e.i(360927),x=e.i(846696),h=e.i(133308);function f({product:e}){let f=(0,u.useRouter)(),[g,j]=(0,m.useState)(!1),[v,y]=(0,m.useState)(!1),N=async()=>{let t=await (0,p.deleteInventoryItem)(e.id);t.success?(x.toast.success("Inventory item deleted successfully"),f.push("/inventory")):x.toast.error(t.error||"Failed to delete inventory item")};return(0,t.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,t.jsx)(s.Breadcrumb,{children:(0,t.jsxs)(s.BreadcrumbList,{children:[(0,t.jsx)(s.BreadcrumbItem,{children:(0,t.jsx)(s.BreadcrumbLink,{asChild:!0,children:(0,t.jsx)(a.default,{href:"/inventory",children:"Inventory"})})}),(0,t.jsx)(s.BreadcrumbSeparator,{}),(0,t.jsx)(s.BreadcrumbItem,{children:(0,t.jsx)(s.BreadcrumbPage,{children:e.name})})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>f.push("/inventory"),children:[(0,t.jsx)(c.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Inventory"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>j(!0),children:[(0,t.jsx)(l.Pencil,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,t.jsxs)(i.Button,{variant:"destructive",size:"sm",onClick:()=>y(!0),children:[(0,t.jsx)(n.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}),(0,t.jsxs)("div",{className:"grid gap-6",children:[e.image&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium",children:"Image"}),(0,t.jsx)("div",{className:"aspect-square max-w-xs rounded-lg overflow-hidden border border-muted",children:(0,t.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Item Name"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:e.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Unit"}),(0,t.jsx)("p",{className:"text-lg uppercase",children:e.unit||"-"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),(0,t.jsx)(r.Badge,{variant:"outline",className:"capitalize w-fit",children:e.category||"-"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Quantity"}),(0,t.jsx)("p",{className:`text-lg font-medium ${e.stockQuantity<=(e.reorderLevel||10)?"text-destructive":""}`,children:e.stockQuantity})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Reorder Level"}),(0,t.jsx)("p",{className:"text-lg",children:e.reorderLevel||10})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"SKU"}),(0,t.jsx)("p",{className:"text-lg font-mono text-sm",children:e.sku||"-"})]})]}),e.description&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),(0,t.jsx)("p",{className:"text-sm",children:e.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-6 border-t",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),(0,t.jsx)("p",{className:"text-sm",children:(0,d.format)(new Date(e.createdAt),"PPp")})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),(0,t.jsx)("p",{className:"text-sm",children:(0,d.format)(new Date(e.updatedAt),"PPp")})]})]})]}),(0,t.jsx)(o.EditInventoryDialog,{product:e,open:g,onOpenChange:j}),(0,t.jsx)(h.DeleteConfirmationDialog,{open:v,onOpenChange:y,onConfirm:N,title:"Delete Inventory Item",description:`Are you sure you want to delete "${e.name}"? This action cannot be undone.`})]})}e.s(["InventoryDetailContent",()=>f])}]);